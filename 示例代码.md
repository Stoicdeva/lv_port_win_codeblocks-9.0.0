# LVGL 示例代码集

## 基础控件示例

### 1. 标签控件 (Label)
```c
// 创建标签
lv_obj_t* label = lv_label_create(lv_screen_active());
lv_label_set_text(label, "Hello LVGL!");

// 设置位置
lv_obj_set_pos(label, 10, 10);

// 设置对齐方式
lv_obj_set_align(label, LV_ALIGN_CENTER);

// 长文本自动换行
lv_label_set_long_mode(label, LV_LABEL_LONG_WRAP);
lv_label_set_text(label, "这是一个很长的文本，会自动换行显示");

// 设置文本颜色
lv_obj_set_style_text_color(label, lv_color_hex(0xFF0000), 0);
```

### 2. 按钮控件 (Button)
```c
// 创建按钮
lv_obj_t* btn = lv_btn_create(lv_screen_active());
lv_obj_set_size(btn, 120, 50);
lv_obj_set_pos(btn, 10, 50);

// 在按钮上添加标签
lv_obj_t* btn_label = lv_label_create(btn);
lv_label_set_text(btn_label, "点击我");

// 按钮点击事件
lv_obj_add_event_cb(btn, btn_event_cb, LV_EVENT_CLICKED, NULL);

// 事件回调函数
static void btn_event_cb(lv_event_t * e)
{
    lv_event_code_t code = lv_event_get_code(e);
    if(code == LV_EVENT_CLICKED) {
        printf("按钮被点击了！\n");
    }
}
```

### 3. 输入框控件 (Textarea)
```c
// 创建输入框
lv_obj_t* textarea = lv_textarea_create(lv_screen_active());
lv_obj_set_size(textarea, 200, 100);
lv_obj_set_pos(textarea, 10, 120);

// 设置占位符文本
lv_textarea_set_placeholder_text(textarea, "请输入文字...");

// 设置最大字符数
lv_textarea_set_max_length(textarea, 100);

// 设置密码模式
lv_textarea_set_password_mode(textarea, true);

// 获取输入内容
const char* text = lv_textarea_get_text(textarea);
```

### 4. 滑块控件 (Slider)
```c
// 创建滑块
lv_obj_t* slider = lv_slider_create(lv_screen_active());
lv_obj_set_size(slider, 200, 20);
lv_obj_set_pos(slider, 10, 240);

// 设置滑块范围
lv_slider_set_range(slider, 0, 100);

// 设置当前值
lv_slider_set_value(slider, 50, LV_ANIM_ON);

// 滑块值变化事件
lv_obj_add_event_cb(slider, slider_event_cb, LV_EVENT_VALUE_CHANGED, NULL);

// 事件回调函数
static void slider_event_cb(lv_event_t * e)
{
    lv_obj_t * slider = lv_event_get_target(e);
    int32_t value = lv_slider_get_value(slider);
    printf("滑块值: %d\n", value);
}
```

### 5. 开关控件 (Switch)
```c
// 创建开关
lv_obj_t* sw = lv_switch_create(lv_screen_active());
lv_obj_set_pos(sw, 10, 280);

// 设置开关状态
lv_obj_add_state(sw, LV_STATE_CHECKED);

// 开关状态变化事件
lv_obj_add_event_cb(sw, switch_event_cb, LV_EVENT_VALUE_CHANGED, NULL);

// 事件回调函数
static void switch_event_cb(lv_event_t * e)
{
    lv_obj_t * sw = lv_event_get_target(e);
    bool checked = lv_obj_has_state(sw, LV_STATE_CHECKED);
    printf("开关状态: %s\n", checked ? "开启" : "关闭");
}
```

## 样式示例

### 1. 基础样式设置
```c
// 创建样式
static lv_style_t style_btn;
lv_style_init(&style_btn);

// 设置背景颜色
lv_style_set_bg_color(&style_btn, lv_color_hex(0x2196F3));

// 设置圆角
lv_style_set_radius(&style_btn, 10);

// 设置内边距
lv_style_set_pad_all(&style_btn, 10);

// 设置边框
lv_style_set_border_width(&style_btn, 2);
lv_style_set_border_color(&style_btn, lv_color_hex(0x000000));

// 应用样式到按钮
lv_obj_add_style(btn, &style_btn, 0);
```

### 2. 悬停效果
```c
// 悬停状态样式
static lv_style_t style_btn_hover;
lv_style_init(&style_btn_hover);
lv_style_set_bg_color(&style_btn_hover, lv_color_hex(0x1976D2));

// 应用悬停样式
lv_obj_add_style(btn, &style_btn_hover, LV_STATE_PRESSED);
```

### 3. 渐变背景
```c
// 创建渐变样式
static lv_style_t style_gradient;
lv_style_init(&style_gradient);

// 设置渐变背景
lv_style_set_bg_grad_color(&style_gradient, lv_color_hex(0xFF5722));
lv_style_set_bg_grad_dir(&style_gradient, LV_GRAD_DIR_VER);
```

## 布局示例

### 1. Flex 布局
```c
// 创建容器
lv_obj_t* cont = lv_obj_create(lv_screen_active());
lv_obj_set_size(cont, 300, 200);
lv_obj_set_pos(cont, 10, 10);

// 设置 Flex 布局
lv_obj_set_layout(cont, LV_LAYOUT_FLEX);
lv_obj_set_flex_flow(cont, LV_FLEX_FLOW_COLUMN);
lv_obj_set_flex_align(cont, LV_FLEX_ALIGN_CENTER, LV_FLEX_ALIGN_CENTER, LV_FLEX_ALIGN_CENTER);

// 在容器中添加控件
lv_obj_t* label1 = lv_label_create(cont);
lv_label_set_text(label1, "第一行");

lv_obj_t* label2 = lv_label_create(cont);
lv_label_set_text(label2, "第二行");

lv_obj_t* btn = lv_btn_create(cont);
lv_obj_t* btn_label = lv_label_create(btn);
lv_label_set_text(btn_label, "按钮");
```

### 2. Grid 布局
```c
// 创建网格容器
lv_obj_t* grid = lv_obj_create(lv_screen_active());
lv_obj_set_size(grid, 300, 200);
lv_obj_set_pos(grid, 10, 10);

// 设置网格布局
lv_obj_set_layout(grid, LV_LAYOUT_GRID);
lv_obj_set_grid_dsc_array(grid, col_dsc, row_dsc);

// 定义列和行描述符
static lv_coord_t col_dsc[] = {70, 70, 70, LV_GRID_TEMPLATE_LAST};
static lv_coord_t row_dsc[] = {50, 50, 50, LV_GRID_TEMPLATE_LAST};

// 在网格中添加控件
lv_obj_t* btn1 = lv_btn_create(grid);
lv_obj_set_grid_cell(btn1, LV_GRID_ALIGN_STRETCH, 0, 1, LV_GRID_ALIGN_STRETCH, 0, 1);

lv_obj_t* btn2 = lv_btn_create(grid);
lv_obj_set_grid_cell(btn2, LV_GRID_ALIGN_STRETCH, 1, 1, LV_GRID_ALIGN_STRETCH, 0, 1);
```

## 动画示例

### 1. 基础动画
```c
// 创建动画
lv_anim_t a;
lv_anim_init(&a);

// 设置动画参数
lv_anim_set_var(&a, obj);
lv_anim_set_values(&a, 0, 100);
lv_anim_set_time(&a, 1000);
lv_anim_set_delay(&a, 0);
lv_anim_set_exec_cb(&a, set_width);
lv_anim_set_path_cb(&a, lv_anim_path_ease_out);

// 开始动画
lv_anim_start(&a);

// 动画执行回调函数
static void set_width(void * var, int32_t v)
{
    lv_obj_set_width((lv_obj_t*)var, v);
}
```

### 2. 透明度动画
```c
// 透明度动画
lv_anim_t a;
lv_anim_init(&a);
lv_anim_set_var(&a, obj);
lv_anim_set_values(&a, 255, 0);
lv_anim_set_time(&a, 1000);
lv_anim_set_exec_cb(&a, set_opa);
lv_anim_start(&a);

// 透明度设置回调
static void set_opa(void * var, int32_t v)
{
    lv_obj_set_style_opa((lv_obj_t*)var, v, 0);
}
```

## 屏幕管理示例

### 1. 创建新屏幕
```c
// 创建新屏幕
lv_obj_t* screen2 = lv_obj_create(NULL);

// 在新屏幕上添加控件
lv_obj_t* label = lv_label_create(screen2);
lv_label_set_text(label, "这是第二个屏幕");
lv_obj_center(label);

// 切换到新屏幕
lv_screen_load(screen2);
```

### 2. 屏幕切换动画
```c
// 带动画的屏幕切换
lv_screen_load_anim(screen2, LV_SCR_LOAD_ANIM_MOVE_LEFT, 300, 0, false);
```

## 图表示例

### 1. 折线图
```c
// 创建图表
lv_obj_t* chart = lv_chart_create(lv_screen_active());
lv_obj_set_size(chart, 200, 150);
lv_obj_set_pos(chart, 10, 10);

// 设置图表参数
lv_chart_set_point_count(chart, 10);
lv_chart_set_range(chart, LV_CHART_AXIS_PRIMARY_Y, 0, 100);

// 添加数据系列
lv_chart_series_t* ser = lv_chart_add_series(chart, lv_color_hex(0xFF0000), LV_CHART_AXIS_PRIMARY_Y);

// 设置数据点
ser->y_points[0] = 10;
ser->y_points[1] = 20;
ser->y_points[2] = 30;
// ... 更多数据点

// 刷新图表
lv_chart_refresh(chart);
```

## 完整示例：简单计算器界面

```c
void create_calculator_ui(void)
{
    // 创建主容器
    lv_obj_t* cont = lv_obj_create(lv_screen_active());
    lv_obj_set_size(cont, 300, 400);
    lv_obj_center(cont);
    
    // 设置 Flex 布局
    lv_obj_set_layout(cont, LV_LAYOUT_FLEX);
    lv_obj_set_flex_flow(cont, LV_FLEX_FLOW_COLUMN);
    lv_obj_set_flex_align(cont, LV_FLEX_ALIGN_CENTER, LV_FLEX_ALIGN_CENTER, LV_FLEX_ALIGN_CENTER);
    
    // 显示结果的标签
    lv_obj_t* result_label = lv_label_create(cont);
    lv_label_set_text(result_label, "0");
    lv_obj_set_style_text_font(result_label, &lv_font_montserrat_24, 0);
    
    // 按钮容器
    lv_obj_t* btn_cont = lv_obj_create(cont);
    lv_obj_set_size(btn_cont, 280, 300);
    lv_obj_set_layout(btn_cont, LV_LAYOUT_GRID);
    
    // 定义按钮网格
    static lv_coord_t col_dsc[] = {70, 70, 70, 70, LV_GRID_TEMPLATE_LAST};
    static lv_coord_t row_dsc[] = {60, 60, 60, 60, 60, LV_GRID_TEMPLATE_LAST};
    lv_obj_set_grid_dsc_array(btn_cont, col_dsc, row_dsc);
    
    // 创建数字按钮
    const char* btn_texts[] = {"7", "8", "9", "/", "4", "5", "6", "*", "1", "2", "3", "-", "0", ".", "=", "+"};
    
    for(int i = 0; i < 16; i++) {
        lv_obj_t* btn = lv_btn_create(btn_cont);
        lv_obj_set_grid_cell(btn, LV_GRID_ALIGN_STRETCH, i % 4, 1, LV_GRID_ALIGN_STRETCH, i / 4, 1);
        
        lv_obj_t* label = lv_label_create(btn);
        lv_label_set_text(label, btn_texts[i]);
        lv_obj_center(label);
        
        // 添加点击事件
        lv_obj_add_event_cb(btn, btn_click_cb, LV_EVENT_CLICKED, (void*)btn_texts[i]);
    }
}

// 按钮点击事件处理
static void btn_click_cb(lv_event_t * e)
{
    const char* text = (const char*)lv_event_get_user_data(e);
    printf("按钮被点击: %s\n", text);
    // 这里可以添加计算器逻辑
}
```

## 使用建议

1. **从简单开始**：先掌握基础控件，再学习复杂功能
2. **多看示例**：参考官方示例代码，理解最佳实践
3. **多动手实践**：修改示例代码，观察效果变化
4. **注意内存管理**：合理使用样式和对象，避免内存泄漏
5. **性能优化**：在复杂界面中注意性能优化技巧

---

**这些示例代码可以帮助您快速上手 LVGL，建议逐个尝试并理解每个功能！**
